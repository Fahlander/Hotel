import tkinter as tk

# Skapa ett Tkinter-fönster
root = tk.Tk()
root.title("Hotellbokning")

rum = {
    101: {"typ": "enkelrum", "ledigt": True, "max_gaster": 1},
    102: {"typ": "enkelrum", "ledigt": True, "max_gaster": 1},
    103: {"typ": "enkelrum", "ledigt": True, "max_gaster": 1},
    104: {"typ": "enkelrum", "ledigt": True, "max_gaster": 1},
    201: {"typ": "dubbelrum", "ledigt": True, "max_gaster": 2},
    202: {"typ": "dubbelrum", "ledigt": True, "max_gaster": 2},
    203: {"typ": "dubbelrum", "ledigt": True, "max_gaster": 2},
    204: {"typ": "dubbelrum", "ledigt": True, "max_gaster": 2},
    301: {"typ": "svit", "ledigt": True, "max_gaster": 4},
    302: {"typ": "svit", "ledigt": True, "max_gaster": 4},
    303: {"typ": "svit", "ledigt": True, "max_gaster": 4},
}

# Funktion för att checka in en gäst
def checka_in():
    visa_tillgangliga_rum()
    rumnummer = int(rumnummer_entry.get())
    if rumnummer in rum:
        if rum[rumnummer]["ledigt"]:
            namn = namn_entry.get()
            antal_personer = int(antal_personer_entry.get())
            max_gaster = rum[rumnummer]["max_gaster"]
            if antal_personer > max_gaster:
                text.insert(tk.END, f"Tyvärr, rum {rumnummer} kan inte ta emot fler än {max_gaster} gäster\n")
            else:
                rum[rumnummer]["ledigt"] = False
                text.insert(tk.END, f"Gästen {namn} har checkat in på rum {rumnummer}.\n")
                uppdatera_rumsstatus()
                rumnummer_entry.delete(0, tk.END)
                namn_entry.delete(0, tk.END)
                antal_personer_entry.delete(0, tk.END)

        else:
            text.insert(tk.END, "Tyvärr, rummet är inte ledigt\n")
            

def checka_ut():
    visa_tillgangliga_rum()
    rumnummer = int(rumnummer_entry.get()) # Uppdaterat namnet på entry-objektet
    if rumnummer in rum:
        if not rum[rumnummer]["ledigt"]:
            namn = namn_entry.get() # Uppdaterat namnet på entry-objektet
            antal_personer = int(antal_personer_entry.get()) # Uppdaterat namnet på entry-objektet
            rum[rumnummer]["ledigt"] = True
            text.insert(tk.END, f"Gästen {namn} har checkat ut från rum {rumnummer}.\n")
            uppdatera_rumsstatus()
            rumnummer_entry.delete(0, tk.END)
            namn_entry.delete(0, tk.END)
            antal_personer_entry.delete(0, tk.END)

        else:
            text.insert(tk.END, "Tyvärr, rummet är redan ledigt\n")
            
def uppdatera_rumsstatus():
    for rumnummer, info in rum.items():
        if info["ledigt"]:
            text.tag_add("ledigt", f"{rumnummer}.0", f"{rumnummer}.end")
            text.tag_remove("upptaget", f"{rumnummer}.0", f"{rumnummer}.end")
        else:
            text.tag_add("upptaget", f"{rumnummer}.0", f"{rumnummer}.end")
            text.tag_remove("ledigt", f"{rumnummer}.0", f"{rumnummer}.end")
            

# Skapa GUI-element
text = tk.Text(root)
text.tag_configure("ledigt", background="green")
text.tag_configure("upptaget", background="red")
rumnummer_label = tk.Label(root, text="Rumnummer:")
rumnummer_entry = tk.Entry(root)
namn_label = tk.Label(root, text="Namn:")
namn_entry = tk.Entry(root)
antal_personer_label = tk.Label(root, text="Antal personer:")
antal_personer_entry = tk.Entry(root)
checka_in_button = tk.Button(root, text="Checka in", command=checka_in)
checka_ut_button = tk.Button(root, text="Checka ut", command=checka_ut)

# Packa GUI-elementen
text.pack()
rumnummer_label.pack()
rumnummer_entry.pack()
namn_label.pack()
namn_entry.pack()
antal_personer_label.pack()
antal_personer_entry.pack()
checka_in_button.pack()
checka_ut_button.pack()

# Funktion för att visa tillgängliga rum
def visa_tillgangliga_rum():
    text.delete("1.0", tk.END)  # Rensa textområdet
    text.insert(tk.END, "Tillgängliga rum:\n")
    for r, info in rum.items():
        if info["ledigt"]:
            text.insert(tk.END, f"Rum {r} - {info['typ']} - Max gäster: {info['max_gaster']}\n", "ledigt")
        else:
            text.insert(tk.END, f"Rum {r} - {info['typ']} - Max gäster: {info['max_gaster']}\n", "upptaget")


root.mainloop()